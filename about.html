<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin ‚Äî Ifaz Travels</title>
  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--brand:#0ea5e9;--brand-dark:#0284c7;--text:#0f172a;--muted:#64748b;--border:#e5e7eb}
    *{box-sizing:border-box} body{margin:0;font-family:'Hind Siliguri',system-ui,sans-serif;background:#f8fafc;color:var(--text)}
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);padding:12px 0;z-index:10}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    .nav{display:flex;align-items:center;justify-content:space-between}
    .nav .left{display:flex;gap:10px;align-items:center;font-weight:800}
    .btn{padding:10px 14px;border-radius:10px;border:1px solid var(--border);background:#fff;font-weight:800;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .btn.danger{background:#fee2e2;border-color:#fecaca;color:#991b1b}
    main{padding:24px 0}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid{grid-template-columns:1fr 1fr}}
    .card{background:#fff;border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow:0 8px 20px rgba(2,8,23,.06)}
    h2{margin:0 0 10px}
    h3{margin:10px 0}
    input,select,textarea{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px;font-size:16px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .row3{display:grid;grid-template-columns:2fr 1fr 1fr;gap:10px}
    .list{display:grid;gap:10px;margin:10px 0}
    .small{color:var(--muted);font-size:14px}
    .flex{display:flex;gap:8px;flex-wrap:wrap}
    .muted{color:var(--muted)}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border:1px solid #e5e7eb;padding:8px;border-radius:6px;text-align:left;background:#fff}
    .table th{background:#f1f5f9}
    .foot{display:flex;gap:10px;justify-content:flex-end;margin-top:10px}
    .ok{display:none;margin-top:8px;color:#065f46;background:#dcfce7;border:1px solid #86efac;padding:8px 10px;border-radius:10px;font-weight:700}
  </style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="left">üõ†Ô∏è Admin Panel <span class="small muted">Ifaz Travels</span></div>
    <div class="flex">
      <a class="btn" href="index.html" target="_blank" rel="noopener">‚ÜóÔ∏è View Site</a>
      <button id="logout" class="btn danger">Logout</button>
    </div>
  </div>
</header>

<main class="container">
  <div class="grid">
    <!-- PROMO MANAGER -->
    <section class="card">
      <h2>Promo Slider</h2>
      <p class="small">* ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶≤‡ßá‡¶ñ‡¶æ-‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï ‡¶∏‡ßç‡¶≤‡¶æ‡¶á‡¶°‡•§ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶™/‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡ßá ‡¶ê ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§</p>
      <div id="promoList" class="list"></div>
      <div class="flex">
        <button id="addPromo" class="btn">+ Add Promo</button>
        <button id="savePromo" class="btn primary">üíæ Save</button>
      </div>
      <div id="okPromo" class="ok">‚úÖ Promo saved</div>
    </section>

    <!-- PACKAGES MANAGER -->
    <section class="card">
      <h2>Packages</h2>
      <p class="small">* index ‡¶™‡ßá‡¶ú‡ßá‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶ï‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶∞ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶¨‡ßá‡•§</p>
      <div style="overflow:auto">
        <table class="table" id="pkgTable">
          <thead>
            <tr><th>#</th><th>Title</th><th>Price</th><th>Note</th><th>Button</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="foot">
        <button id="resetPkg" class="btn">‚Ü∫ Reset Default</button>
        <button id="savePkg" class="btn primary">üíæ Save</button>
      </div>
      <div id="okPkg" class="ok">‚úÖ Packages saved</div>
    </section>

    <!-- OFFICE / CONTACT -->
    <section class="card">
      <h2>Office / Contact</h2>
      <div class="row">
        <label>Phone 1<input id="ph1" placeholder="01712-055858"></label>
        <label>Phone 2<input id="ph2" placeholder="01714-642113"></label>
      </div>
      <label style="margin-top:10px">Address
        <input id="addr" placeholder="Golden Tower, Amborkhana, Sylhet">
      </label>
      <div class="foot">
        <button id="saveOffice" class="btn primary">üíæ Save</button>
      </div>
      <div id="okOffice" class="ok">‚úÖ Office info saved</div>
      <p class="small muted">* index/contact ‡¶™‡ßá‡¶ú‡ßá ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞/‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá <code>site-data.js</code> ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡ßá‡•§</p>
    </section>
  </div>
</main>

<script>
  // Auth guard
  if(localStorage.getItem('ifaz_auth')!=='1'){ window.location.href='index.html'; }

  const DEFAULT_PROMOS = [
    { text:'Dhaka ‚Üí Jeddah Air Ticket ‚Äî Lowest Price ‚Ä¢ Book Now', href:'#packages' },
    { text:'China Visa ‚Äî No Visa, No Fee', href:'#contact' },
    { text:'Domestic Ticket ‚Äî 5% Discount', href:'#packages' },
    { text:'Malaysia Visa Support', href:'#services' },
    { text:'Hajj Pre-Registration ‚Äî ‡¶ö‡¶≤‡¶õ‡ßá', href:'#services' },
    { text:'GAMCA Medical Slip ‚Äî 1 Minute Delivery*', href:'#services' }
  ];

  const DEFAULT_PKGS = [
    {title:'‚úàÔ∏è ‡ß≠ ‡¶¶‡¶ø‡¶®', price:'Call for Price', note:'Visa, Ticket, Hotel, Transport', btn:'Get Quote'},
    {title:'üïå ‡ßß‡ß¶ ‡¶¶‡¶ø‡¶®', price:'Call for Price', note:'Group / Family rooms', btn:'Get Quote'},
    {title:'üè® ‡ßß‡ß™ ‡¶¶‡¶ø‡¶®', price:'‡ß≥‡ßß,‡ß™‡ß´‡ß¶‡ß¶‡ß¶', note:'‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞ ‡¶õ‡¶æ‡ßú‡¶æ ¬∑ Near Haram', btn:'Get Quote'},
    {title:'üìÖ October 2025 (Group)', price:'Early-bird available', note:'19 Oct departure ¬∑ Guide included', btn:'Reserve'},
    {title:'üìÖ November 2025 (Group)', price:'Discount available', note:'1 Nov departure ¬∑ Flexible dates', btn:'Reserve'},
    {title:'‚≠ê Custom / Private Umrah', price:'Tailored Itinerary', note:'Premium hotel ¬∑ Private transport', btn:'Call for Plan'},
    {title:'üõ´ Air Ticket & Visa Assist', price:'JED / MED', note:'Multiple airlines ¬∑ Quick processing', btn:'Get Quote'}
  ];

  // --- PROMO UI ---
  const promoList = document.getElementById('promoList');
  function loadPromos(){ return JSON.parse(localStorage.getItem('ifaz_promos')||'null') || DEFAULT_PROMOS; }
  function renderPromos(){
    promoList.innerHTML='';
    loadPromos().forEach((p,i)=>{
      const wrap=document.createElement('div'); wrap.className='row3';
      wrap.innerHTML = `
        <input placeholder="Promo text" value="${p.text?.replaceAll('"','&quot;')||''}">
        <input placeholder="Link (e.g. #packages)" value="${p.href||'#'}">
        <div class="flex">
          <button class="btn danger" data-i="${i}">Delete</button>
        </div>`;
      promoList.appendChild(wrap);
    });
  }
  function collectPromos(){
    const rows=[...promoList.querySelectorAll('.row3')];
    return rows.map(r=>({ text:r.children[0].value.trim(), href:r.children[1].value.trim()||'#' }))
               .filter(p=>p.text);
  }
  document.getElementById('addPromo').onclick = ()=> {
    const arr = loadPromos(); arr.push({text:'New promo text', href:'#'});
    localStorage.setItem('ifaz_promos', JSON.stringify(arr)); renderPromos();
  };
  document.getElementById('savePromo').onclick = ()=> {
    localStorage.setItem('ifaz_promos', JSON.stringify(collectPromos()));
    document.getElementById('okPromo').style.display='block';
    setTimeout(()=>document.getElementById('okPromo').style.display='none',1500);
  };
  promoList.addEventListener('click', (e)=>{
    if(e.target.matches('.btn.danger')){
      const i=+e.target.dataset.i;
      const arr=loadPromos(); arr.splice(i,1);
      localStorage.setItem('ifaz_promos', JSON.stringify(arr)); renderPromos();
    }
  });

  // --- PKG UI ---
  const pkgTBody = document.querySelector('#pkgTable tbody');
  function loadPkgs(){ return JSON.parse(localStorage.getItem('ifaz_packages')||'null') || DEFAULT_PKGS; }
  function renderPkgs(){
    const data=loadPkgs(); pkgTBody.innerHTML='';
    data.forEach((p,i)=>{
      const tr=document.createElement('tr');
      tr.innerHTML = `
        <td>${i+1}</td>
        <td><input value="${p.title?.replaceAll('"','&quot;')||''}"></td>
        <td><input value="${p.price?.replaceAll('"','&quot;')||''}"></td>
        <td><input value="${p.note?.replaceAll('"','&quot;')||''}"></td>
        <td><input value="${p.btn?.replaceAll('"','&quot;')||''}"></td>
      `;
      pkgTBody.appendChild(tr);
    });
  }
  function collectPkgs(){
    const rows=[...pkgTBody.querySelectorAll('tr')];
    return rows.map(r=>{
      const t=[...r.querySelectorAll('input')].map(i=>i.value);
      return {title:t[0],price:t[1],note:t[2],btn:t[3]};
    });
  }
  document.getElementById('savePkg').onclick = ()=>{
    localStorage.setItem('ifaz_packages', JSON.stringify(collectPkgs()));
    document.getElementById('okPkg').style.display='block';
    setTimeout(()=>document.getElementById('okPkg').style.display='none',1500);
  };
  document.getElementById('resetPkg').onclick = ()=>{
    localStorage.removeItem('ifaz_packages'); renderPkgs();
  };

  // --- OFFICE ---
  const ph1=document.getElementById('ph1'), ph2=document.getElementById('ph2'), addr=document.getElementById('addr');
  function loadOffice(){ return JSON.parse(localStorage.getItem('ifaz_office')||'null') || {ph1:'01712-055858', ph2:'01714-642113', addr:'Golden Tower, Amborkhana, Sylhet'}; }
  function renderOffice(){ const o=loadOffice(); ph1.value=o.ph1||''; ph2.value=o.ph2||''; addr.value=o.addr||''; }
  document.getElementById('saveOffice').onclick = ()=>{
    localStorage.setItem('ifaz_office', JSON.stringify({ph1:ph1.value.trim(), ph2:ph2.value.trim(), addr:addr.value.trim()}));
    document.getElementById('okOffice').style.display='block';
    setTimeout(()=>document.getElementById('okOffice').style.display='none',1500);
  };

  // Logout
  document.getElementById('logout').onclick = ()=>{ localStorage.removeItem('ifaz_auth'); window.location.href='index.html'; };

  // Init
  renderPromos(); renderPkgs(); renderOffice();
</script>
</body>
</html>
